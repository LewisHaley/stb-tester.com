<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8' />
  <title>Test results 2013-08-18 12:59:41 - 2013-08-18 12:57:33</title>

  <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
  <style>
    table.sortable th { cursor: pointer; }
  </style>
</head>

<body>

<div class="container-fluid">

  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <a class="brand" href="../">stb-tester results</a>
      <ul class="nav">
        <li class="active"><a>runner example</a></li>
      </ul>
    </div>
  </div>
  <div class="row-fluid" style="padding-top: 40px">

    <div class="span8" height="100%">
      <table id="testruns" class="table table-condensed sortable">
      <thead>
      <tr>
        <th>Timestamp</th>
        <th>Test</th>
        <th>Commit</th>
        <th>Exit status</th>
        <th>Notes</th>
        <th>Duration</th>
        
      </tr>
      </thead>
      <tbody>
      
      <tr class="warning">
        <td>2013-08-18 12:59:41</td>
        <td><a href="2013-08-18_12.59.41/index.html" target="details">runner_example/test.py</a></td>
        <td>bd7fb25</td>
        <td>
          143
          
            — killed (sigterm)
          
        </td>
        <td></td>
        <td>00:00:01</td>
        
      </tr>
      
      <tr class="success">
        <td>2013-08-18 12:59:38</td>
        <td><a href="2013-08-18_12.59.38/index.html" target="details">runner_example/test.py</a></td>
        <td>bd7fb25</td>
        <td>
          0
          
        </td>
        <td></td>
        <td>00:00:03</td>
        
      </tr>
      
      <tr class="success">
        <td>2013-08-18 12:59:34</td>
        <td><a href="2013-08-18_12.59.34/index.html" target="details">runner_example/test.py</a></td>
        <td>bd7fb25</td>
        <td>
          0
          
        </td>
        <td></td>
        <td>00:00:03</td>
        
      </tr>
      
      <tr class="error">
        <td>2013-08-18 12:57:33</td>
        <td><a href="2013-08-18_12.57.33/index.html" target="details">runner_example/test.py</a></td>
        <td>3675c6b</td>
        <td>
          1
          
            — MotionTimeout: Didn't find mot...
          
        </td>
        <td></td>
        <td>00:00:12</td>
        
      </tr>
      
      </tbody>
      </table>
    </div>

    <div class="span4">
      <iframe data-spy="affix" id="details" name="details" seamless="true"
        width="100%" style="border: none"></iframe>
    </div>

  </div>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="http://cdn.jsdelivr.net/sorttable/2/sorttable.js"></script>
<script>
  $(document).ready(function() {
    $("#details").css("height", $(window).height());
    $("#testruns tbody tr").on("click", select_testrun);
    $(document).on("keydown", navigate_testruns);

    var selected_row = $();
    function select_testrun() {
      selected_row.removeClass("info");
      selected_row = $(this).closest("tr");
      $("#details").attr(
        "src",
        $("td:nth-child(2) a", selected_row).attr("href"));
      selected_row.addClass("info");

      // Scroll if navigated with keyboard outside of visible viewport.
      if (selected_row.offset().top + selected_row.height() >
          $(window).height() + $(window).scrollTop()) {
        $(window).scrollTop(
          selected_row.offset().top +
          selected_row.height() -
          $(window).height());
      }
      // 40px for the titlebar: http://stackoverflow.com/questions/11124777
      if (selected_row.offset().top - 40 < $(window).scrollTop()) {
        $(window).scrollTop(selected_row.offset().top - 40);
      }
    };
    function navigate_testruns(event) {
      if (event.keyCode == 38) { // up
        var rows = $("#testruns tbody tr");
        var prev = $(rows[ Math.max(0, rows.index(selected_row) - 1) ]);
        if (prev.length) {
          prev.click();
        }
        return false;
      }
      if (event.keyCode == 40) { // down
        var rows = $("#testruns tbody tr");
        var next = $(rows[
          Math.min(rows.length - 1, rows.index(selected_row) + 1) ]);
        if (next.length) {
          next.click();
        }
        return false;
      }
    };
  });
</script>

</body>
</html>
